{% extends 'base.html' %}

{% block title %}Matrix Operations{% endblock %}

{% block content %}
<div id="app" style="display: flex; justify-content: space-between; align-items: flex-start;">
    <!-- Left side: Input forms for two matrices -->
    <div style="width: 70%;">
        <h2>Matrix Input</h2>

        <!-- Form for Matrix A -->
        <h3>Matrix A</h3>
        <form @submit.prevent="generateMatrix('A')">
            <label for="rows-a">Number of Rows:</label>
            <input type="number" id="rows-a" v-model="rowsA" min="1" required>
            <label for="cols-a">Number of Columns:</label>
            <input type="number" id="cols-a" v-model="colsA" min="1" required>
            <button type="submit">Generate Matrix A</button>
        </form>
        <div v-if="matrixA.length > 0" style="margin-top: 10px;">
            <h4>Matrix A:</h4>
            <div v-for="(row, rowIndex) in matrixA" :key="'a-' + rowIndex">
                <input v-for="(value, colIndex) in row" :key="'a-' + rowIndex + '-' + colIndex"
                       type="number" v-model.number="matrixA[rowIndex][colIndex]"
                       style="width: 50px; margin: 5px;">
            </div>
        </div>

        <!-- Form for Matrix B -->
        <h3>Matrix B</h3>
        <form @submit.prevent="generateMatrix('B')">
            <label for="rows-b">Number of Rows:</label>
            <input type="number" id="rows-b" v-model="rowsB" min="1" required>
            <label for="cols-b">Number of Columns:</label>
            <input type="number" id="cols-b" v-model="colsB" min="1" required>
            <button type="submit">Generate Matrix B</button>
        </form>
        <div v-if="matrixB.length > 0" style="margin-top: 10px;">
            <h4>Matrix B:</h4>
            <div v-for="(row, rowIndex) in matrixB" :key="'b-' + rowIndex">
                <input v-for="(value, colIndex) in row" :key="'b-' + rowIndex + '-' + colIndex"
                       type="number" v-model.number="matrixB[rowIndex][colIndex]"
                       style="width: 50px; margin: 5px;">
            </div>
        </div>

        <!-- Result container -->
        <div v-if="resultMatrix.length > 0" style="margin-top: 20px;">
            <h3>{{ resultTitle }}</h3>
            <table style="border-collapse: collapse; margin: 10px auto;">
                <tr v-for="(row, rowIndex) in resultMatrix" :key="'result-' + rowIndex">
                    <td v-for="(cell, colIndex) in row" :key="'result-' + rowIndex + '-' + colIndex"
                        style="border: 1px solid #333; padding: 8px 12px; text-align: center;">
                        {{ cell }}
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <!-- Right side: Buttons for matrix operations -->
    <div style="width: 25%; text-align: center; border-left: 1px solid #ccc; padding-left: 20px;">
        <h3>Matrix Operations</h3>
        <button style="margin: 10px; padding: 10px 20px;" @click="addMatrices">Add Matrices</button>
        <button style="margin: 10px; padding: 10px 20px;" @click="subtractMatrices">Subtract Matrices</button>
        <button style="margin: 10px; padding: 10px 20px;" @click="scalarMultiplyMatrix">Scalar Multiply Matrix</button>
    </div>
</div>

<!-- Include Vue.js via CDN -->
<script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>

<script>
    const app = Vue.createApp({
        data() {
            return {
                rowsA: 0,
                colsA: 0,
                rowsB: 0,
                colsB: 0,
                matrixA: [],
                matrixB: [],
                resultMatrix: [],
                resultTitle: "",
            };
        },
        methods: {
            generateMatrix(matrixId) {
                const rows = matrixId === 'A' ? this.rowsA : this.rowsB;
                const cols = matrixId === 'A' ? this.colsA : this.colsB;

                const matrix = Array.from({ length: rows }, () =>
                    Array.from({ length: cols }, () => 0)
                );

                if (matrixId === 'A') this.matrixA = matrix;
                if (matrixId === 'B') this.matrixB = matrix;
            },
            addMatrices() {
                if (this.matrixA.length && this.matrixB.length) {
                    this.resultMatrix = this.matrixA.map((row, i) =>
                        row.map((value, j) => value + (this.matrixB[i][j] || 0))
                    );
                    this.resultTitle = "Addition Result";
                } else {
                    alert("Please define both matrices first.");
                }
            },
            subtractMatrices() {
                if (this.matrixA.length && this.matrixB.length) {
                    this.resultMatrix = this.matrixA.map((row, i) =>
                        row.map((value, j) => value - (this.matrixB[i][j] || 0))
                    );
                    this.resultTitle = "Subtraction Result";
                } else {
                    alert("Please define both matrices first.");
                }
            },
            scalarMultiplyMatrix() {
                const scalar = parseFloat(prompt("Enter a scalar value:"));
                if (!isNaN(scalar)) {
                    this.resultMatrix = this.matrixA.map((row) =>
                        row.map((value) => value * scalar)
                    );
                    this.resultTitle = "Scalar Multiplication Result";
                } else {
                    alert("Invalid scalar value.");
                }
            },
        },
    });

    app.mount("#app");
</script>
{% endblock %}


